# Importing libraries
import matplotlib.pyplot as plt
import numpy as np
from statistics import median, mean
from unco import UNCO_PATH
from pathlib import Path

def _get_color_linestyle_of_model(model_numb):
    color = "r"
    linestyle = "-"
    match model_numb:
        case 1:
            color = "r"
            linestyle = "-"
        case 2:
            color = "g"
            linestyle = "-"
        case 3:
            color = "b"
            linestyle = "-"
        case 4:
            color = "y"
            linestyle = "-"
        case 5:
            color = "m"
            linestyle = "-"
        case 6:
            color = "c"
            linestyle = "-"
        case 7:
            color = "k"
            linestyle = "-"
        case 8:
            color = "r"
            linestyle = ":"
        case 9:
            color = "g"
            linestyle = ":"
        case 10:
            color = "b"
            linestyle = ":"
    return color, linestyle


def _plot_results_increasing_alternatives(X : range, results : list[list[list[float]]], querylist : list[int], modellist : list[int], increasing_alternatives : bool):
    output = [[[] for _ in modellist] for _ in querylist]
    for res in results:
        for query_numb, query_res in enumerate(res):
            for model_numb, model_res in enumerate(query_res):
                output[query_numb][model_numb].append(model_res)

    print(output)
    
    for index, query_numb in enumerate(querylist):
        fig = plt.figure()
        for modelindex, model_numb in enumerate(modellist):
            color, linestyle = _get_color_linestyle_of_model(model_numb)
            if model_numb == 9: model_numb = "9a"
            model_numb = "9b" if model_numb == 10 else str(model_numb)
            plt.plot(X, output[index][modelindex], color=color, linestyle=linestyle, label=str(model_numb))

        if increasing_alternatives: plt.xlabel("#Alternatives per uncertain statement")
        else: plt.xlabel("#Uncertainties per column")

        plt.ylabel("Time in seconds")
        if increasing_alternatives: plt.title(f"Query {query_numb} with increasing numb alternatives")
        else: plt.title(f"Query {query_numb} with increasing numb uncertainties")

        plt.legend()

        #plt.ylim([0.29, 0.36])

        if increasing_alternatives: plt.savefig(Path(UNCO_PATH,f"src/benchmark/results/alternatives{query_numb}.pdf"), format="pdf", bbox_inches="tight")
        else: plt.savefig(Path(UNCO_PATH,f"src/benchmark/results/uncertainties{query_numb}.pdf"), format="pdf", bbox_inches="tight")

        plt.close(fig)
            # plt.show()
# Using Numpy to create an array X

  
# raw
res1 = [[[0.31581735610961914, 0.316461443901062, 0.2972449064254761, 0.30834710597991943, 0.31610798835754395]], [[0.31742382049560547, 0.32586634159088135, 0.3242994546890259, 0.3321026563644409, 0.323238730430603]], [[0.3202708959579468, 0.3297187089920044, 0.3758777379989624, 0.3132728338241577, 0.3390456438064575]], [[0.32495248317718506, 0.34338557720184326, 0.3421649932861328, 0.382671594619751, 0.3440277576446533]], [[0.3710055351257324, 0.34922969341278076, 0.3755371570587158, 0.31953907012939453, 0.34186267852783203]], [[0.3620065450668335, 0.3730134963989258, 0.37717926502227783, 0.3509582281112671, 0.3479503393173218]], [[0.35990142822265625, 0.3673804998397827, 0.348044753074646, 0.3825486898422241, 0.35394370555877686]], [[0.36579716205596924, 0.4142543077468872, 0.349450945854187, 0.3481963872909546, 0.37901735305786133]], [[0.3651919364929199, 0.36757636070251465, 0.4271751642227173, 0.355518102645874, 0.3768390417098999]], [[0.3596668243408203, 0.3457832336425781, 0.40120089054107666, 0.3930472135543823, 0.3863186836242676]], [[0.42096197605133057, 0.3691260814666748, 0.37250328063964844, 0.3891184329986572, 0.39053165912628174]]]

res2 = [[[0.3190326690673828, 0.30399465560913086, 0.32741880416870117, 0.3193955421447754, 0.3293631076812744]], [[0.29203248023986816, 0.31877994537353516, 0.2993462085723877, 0.3318209648132324, 0.3216133117675781]], [[0.3041362762451172, 0.33025431632995605, 0.30800914764404297, 0.30004000663757324, 0.31052565574645996]], [[0.3214991092681885, 0.32016563415527344, 0.317523717880249, 0.31156015396118164, 0.30679821968078613]], [[0.3161275386810303, 0.2987809181213379, 0.30222320556640625, 0.3158102035522461, 0.3177196979522705]], [[0.3272683620452881, 0.30645227432250977, 0.31587886810302734, 0.3169841766357422, 0.35596132278442383]], [[0.31166863441467285, 0.32210350036621094, 0.3469271659851074, 0.3294966220855713, 0.3586735725402832]], [[0.3194923400878906, 0.33059072494506836, 0.30536341667175293, 0.31070446968078613, 0.35825276374816895]], [[0.31354618072509766, 0.32853245735168457, 0.32681894302368164, 0.3440113067626953, 0.31135106086730957]], [[0.3243536949157715, 0.31683349609375, 0.3362283706665039, 0.3459947109222412, 0.3090353012084961]], [[0.3324849605560303, 0.3487386703491211, 0.3344752788543701, 0.3375980854034424, 0.3508565425872803]]]


# median = 5
#res1 = [[[0.30747389793395996, 0.3020329475402832, 0.30664944648742676, 0.3044455051422119, 0.29869019985198975]], [[0.3374934196472168, 0.31201863288879395, 0.3029102087020874, 0.3096134662628174, 0.3132673501968384]], [[0.3089708089828491, 0.31796371936798096, 0.32004761695861816, 0.3126600980758667, 0.3300468921661377]], [[0.3216143846511841, 0.3273056745529175, 0.31213390827178955, 0.316292405128479, 0.32383298873901367]], [[0.32285892963409424, 0.3319072723388672, 0.3198816776275635, 0.3166215419769287, 0.3121650218963623]], [[0.3314509391784668, 0.33919811248779297, 0.3290356397628784, 0.32667994499206543, 0.33666813373565674]], [[0.33795714378356934, 0.3285785913467407, 0.32093358039855957, 0.34092044830322266, 0.3270770311355591]], [[0.3585994243621826, 0.3474597930908203, 0.3388596773147583, 0.34146034717559814, 0.33688080310821533]], [[0.3464505672454834, 0.35600852966308594, 0.3388477563858032, 0.3399542570114136, 0.3470478057861328]], [[0.34879183769226074, 0.35839343070983887, 0.3562980890274048, 0.35866641998291016, 0.35130250453948975]], [[0.3641113042831421, 0.3581535816192627, 0.3588770627975464, 0.3523674011230469, 0.34496092796325684]]]

res2 = [[[0.29714059829711914, 0.29281139373779297, 0.29756617546081543, 0.29843783378601074, 0.29461026191711426]], [[0.29984402656555176, 0.30460476875305176, 0.2979722023010254, 0.3006739616394043, 0.2950136661529541]], [[0.292449951171875, 0.31788086891174316, 0.3103773593902588, 0.292339563369751, 0.30208873748779297]], [[0.30591535568237305, 0.2941606044769287, 0.2986314296722412, 0.3007466793060303, 0.30333900451660156]], [[0.2928445339202881, 0.29773759841918945, 0.31015610694885254, 0.30226778984069824, 0.302628755569458]], [[0.3142201900482178, 0.29521870613098145, 0.298997163772583, 0.3074972629547119, 0.3064570426940918]], [[0.292910099029541, 0.29383111000061035, 0.2969202995300293, 0.3127443790435791, 0.3119680881500244]], [[0.2934706211090088, 0.2936084270477295, 0.30002784729003906, 0.3004634380340576, 0.2958555221557617]], [[0.2984156608581543, 0.29797816276550293, 0.3119664192199707, 0.304934024810791, 0.30917930603027344]], [[0.32617688179016113, 0.2957324981689453, 0.30013442039489746, 0.29477834701538086, 0.3169441223144531]], [[0.3035311698913574, 0.3090779781341553, 0.30571913719177246, 0.2955634593963623, 0.30615687370300293]]]

res1 = [[[0.06308579444885254, 0.05965077877044678, 0.05793933073679606, 0.05632479985555013, 0.057222882906595864, 0.0709614356358846, 0.059170285860697426, 0.069367249806722, 0.06429004669189453, 0.0709298849105835], [0.015218695004781088, 0.015095154444376627, 0.015477935473124186, 0.01519028345743815, 0.03675619761149088, 0.014901399612426758, 0.014701406160990397, 0.014877716700236002, 0.014896035194396973, 0.014615098635355631], [0.05876636505126953, 0.057190259297688804, 0.057198802630106606, 0.05616601308186849, 0.061893065770467125, 0.056263486544291176, 0.059134999910990395, 0.05527174472808838, 0.061030308405558266, 0.05385728677113851], [0.2750674883524577, 0.2729685306549072, 0.27498459815979004, 0.27163724104563397, 0.27215619881947833, 0.27394092082977295, 0.2731691201527913, 0.27155903975168866, 0.2716211477915446, 0.27543361981709796], [0.009905139605204264, 0.014068404833475748, 0.009733875592549643, 0.011176029841105143, 0.012531439463297525, 0.012670358022054037, 0.01264492670694987, 0.012455264727274576, 0.010477463404337565, 0.010502854983011881], [0, 0, 0.3281588554382324, 0.33385705947875977, 0.3339592218399048, 0, 0, 0, 0, 0.32627348105112713]], [[0.08540225028991699, 0.08108743031819661, 0.09279481569925944, 0.11899383862813313, 0.08898087342580159, 0.08825210730234782, 0.08073767026265462, 0.066154678662618, 0.05613235632578532, 0.0556641419728597], [0.04044187068939209, 0.04093452294667562, 0.041605750719706215, 0.04751098155975342, 0.03571311632792155, 0.04153788089752197, 0.04696722825368246, 0.03451315561930338, 0.019562800725301106, 0.02212647596995036], [0.08191712697347005, 0.07216803232828777, 0.0817185640335083, 0.10153516133626302, 0.07533045609792073, 0.08812916278839111, 0.07585986455281575, 0.06696867942810059, 0.05607382456461588, 0.05911592642466227], [0.33607856432596844, 0.2952706416447957, 0.4385283390680949, 0.3623270591100057, 0.4105043013890584, 0.32881959279378253, 0.29402923583984375, 0.29643547534942627, 0.27165651321411133, 0.27476751804351807], [0.051139235496520996, 0.0423515240351359, 0.06624996662139893, 0.0635066032409668, 0.09103500843048096, 0.04518433411916097, 0.04430830478668213, 0.036287943522135414, 0.030194679896036785, 0.031179149945576985], [0, 0, 0.5337393681208292, 0.4343593120574951, 0.5984569787979126, 0, 0, 0, 0, 0.3459423780441284]], [[0.096457839012146, 0.08686105410257976, 0.11691073576609294, 0.12326860427856445, 0.09294005235036214, 0.08981609344482422, 0.09467649459838867, 0.06680381298065186, 0.056635499000549316, 0.04950896898905436], [0.043304125467936196, 0.04093615214029948, 0.045447746912638344, 0.07198774814605713, 0.03918226559956869, 0.04801583290100098, 0.05490191777547201, 0.047195831934611, 0.024825056393941242, 0.02569623788197835], [0.0868977705637614, 0.07773701349894206, 0.09380857149759929, 0.1482857863108317, 0.0901021957397461, 0.07754584153493245, 0.08266325791676839, 0.06670590241750081, 0.0581592321395874, 0.05959932009379069], [0.38793758551279706, 0.3012125889460246, 0.564428965250651, 0.4273565212885539, 0.5201181173324585, 0.3647558291753133, 0.2987521489461263, 0.301681121190389, 0.2528676191965739, 0.2589978377024333], [0.08666106065114339, 0.0708316167195638, 0.11543444792429607, 0.10798398653666179, 0.16109081109364828, 0.08043317000071208, 0.07128806908925374, 0.061826467514038086, 0.044062296549479164, 0.04516760508219401], [0, 0, 0.6902527411778768, 0.5260691245396932, 0.8390719493230184, 0, 0, 0, 0, 0.33471882343292236]], [[0.10140744845072429, 0.10284066200256348, 0.12845385074615479, 0.14370286464691162, 0.10409943262736003, 0.1034009059270223, 0.09948229789733887, 0.076927383740743, 0.053881446520487465, 0.04976137479146322], [0.057224790255228676, 0.061567465464274086, 0.058474342028299965, 0.09059357643127441, 0.04084082444508871, 0.051048994064331055, 0.0561525026957194, 0.05265859762827555, 0.031861305236816406, 0.03177452087402344], [0.08389135201772054, 0.09410333633422852, 0.10713394482930501, 0.1907956600189209, 0.08757225672403972, 0.08428064982096355, 0.08969958623250325, 0.0733174482981364, 0.05837098757425944, 0.06348220507303874], [0.4309579133987427, 0.3056107759475708, 0.6818647384643555, 0.4852441151936849, 0.6464200417200724, 0.4049294789632161, 0.3014530340830485, 0.2992543379465739, 0.24050347010294595, 0.24578956762949625], [0.12242881457010905, 0.09965948263804118, 0.1634292999903361, 0.1515879233678182, 0.23983140786488852, 0.11131580670674641, 0.09737579027811687, 0.08146333694458008, 0.05605157216389974, 0.06278204917907715], [0, 0, 0.840035080909729, 0.6020918687184652, 1.092907428741455, 0, 0, 0, 0, 0.33312034606933594]], [[0.1149429480234782, 0.10102224349975586, 0.16675694783528647, 0.14475695292154947, 0.13005030155181885, 0.113473375638326, 0.10263232390085857, 0.07804890473683675, 0.04519915580749512, 0.04656787713368734], [0.06242561340332031, 0.06606745719909668, 0.06745409965515137, 0.1170281171798706, 0.047112743059794106, 0.06823523839314778, 0.06170121828715006, 0.06563802560170491, 0.0334012508392334, 0.0344319740931193], [0.09141298135121663, 0.10167876879374187, 0.13579054673512778, 0.22893615563710532, 0.09012166659037273, 0.08769766489664714, 0.10708439350128174, 0.07908431688944499, 0.05735274155934652, 0.06405886014302571], [0.468090017636617, 0.3097967704137166, 0.7944823900858561, 0.5580360094706217, 0.7758132219314575, 0.4321943124135335, 0.310705304145813, 0.29237814744313556, 0.23143593470255533, 0.2364574670791626], [0.15992077191670737, 0.1262415647506714, 0.21508165200551352, 0.20326101779937744, 0.3115696907043457, 0.14448090394337973, 0.12418123086293538, 0.10337698459625244, 0.07271985212961833, 0.0777810017267863], [0, 0, 1.0065642595291138, 0.6844828526178995, 1.3273832003275554, 0, 0, 0, 0, 0.3312292496363322]],[[0.12063379287719726, 0.11177754402160645, 0.1305145263671875, 0.15476641654968262, 0.12512421607971191, 0.12234749794006347, 0.08956265449523926, 0.07818989753723145, 0.0425870418548584, 0.03987464904785156], [0.06399879455566407, 0.06905765533447265, 0.07531595230102539, 0.14334506988525392, 0.05048270225524902, 0.07208952903747559, 0.06642861366271972, 0.06228928565979004, 0.03565382957458496, 0.036070060729980466], [0.09733238220214843, 0.11094450950622559, 0.15395278930664064, 0.28046283721923826, 0.09532608985900878, 0.08944902420043946, 0.11533560752868652, 0.08354530334472657, 0.059425640106201175, 0.06544690132141114], [0.4972973346710205, 0.31024746894836425, 0.8954161643981934, 0.6038474082946778, 0.8685026645660401, 0.46297435760498046, 0.3064389705657959, 0.28847012519836424, 0.21702847480773926, 0.22497262954711914], [0.20311279296875, 0.15600523948669434, 0.26432337760925295, 0.23842501640319824, 0.38024249076843264, 0.18446626663208007, 0.15353102684020997, 0.12028837203979492, 0.08808302879333496, 0.08746423721313476], [0.0, 0.0, 1.1599794387817384, 0.7498997211456299, 1.5652257442474364, 0.0, 0.0, 0.0, 0.0, 0.3243900775909424]], [[0.11702976226806641, 0.116827392578125, 0.15044426918029785, 0.18349413871765136, 0.12968525886535645, 0.12951269149780273, 0.10706262588500977, 0.07539081573486328, 0.04049873352050781, 0.045418739318847656], [0.06331825256347656, 0.07611684799194336, 0.08640332221984863, 0.17515320777893068, 0.051504898071289065, 0.07352190017700196, 0.07393412590026856, 0.07267203330993652, 0.04734678268432617, 0.03809523582458496], [0.10744404792785645, 0.12893133163452147, 0.16447558403015136, 0.32292613983154295, 0.10486717224121093, 0.09613890647888183, 0.12801022529602052, 0.08168902397155761, 0.0636526107788086, 0.06483697891235352], [0.5610178947448731, 0.30997400283813475, 1.0370898246765137, 0.674133586883545, 0.9522889614105224, 0.4942333698272705, 0.3070069789886475, 0.2695156097412109, 0.20868825912475586, 0.21394948959350585], [0.2261801242828369, 0.17519354820251465, 0.31359615325927737, 0.28667397499084474, 0.45200309753417967, 0.21744890213012696, 0.17779164314270018, 0.13392071723937987, 0.10345535278320313, 0.10514664649963379], [0.0, 0.0, 1.3311435222625732, 0.8395764350891113, 1.8308325290679932, 0.0, 0.0, 0.0, 0.0, 0.3208338737487793]], [[0.12958617210388185, 0.11551332473754883, 0.14113178253173828, 0.19187684059143068, 0.12628779411315919, 0.12735719680786134, 0.11266074180603028, 0.09237084388732911, 0.039063549041748045, 0.03875088691711426], [0.06925506591796875, 0.08143205642700195, 0.09911251068115234, 0.1985644817352295, 0.05423550605773926, 0.08150362968444824, 0.07977724075317383, 0.07535514831542969, 0.04870128631591797, 0.04668502807617188], [0.115447998046875, 0.1362924098968506, 0.18070759773254394, 0.36525416374206543, 0.10985431671142579, 0.10327544212341308, 0.13529701232910157, 0.08873987197875977, 0.06473431587219239, 0.06691851615905761], [0.5776875019073486, 0.30791845321655276, 1.1603326320648193, 0.7319356441497803, 1.0822153568267823, 0.526317024230957, 0.3074203968048096, 0.26141819953918455, 0.1975177764892578, 0.19980258941650392], [0.27265357971191406, 0.2099759101867676, 0.3695429801940918, 0.3355101108551025, 0.533556318283081, 0.24510178565979004, 0.20547471046447754, 0.15941472053527833, 0.11494269371032714, 0.12057261466979981], [0.0, 0.0, 1.5075572967529296, 0.9159148216247559, 2.0960247039794924, 0.0, 0.0, 0.0, 0.0, 0.31455073356628416]], [[0.13272204399108886, 0.11485824584960938, 0.15607776641845703, 0.2061922073364258, 0.12250332832336426, 0.12871894836425782, 0.10761404037475586, 0.08674592971801758, 0.03266220092773438, 0.033261585235595706], [0.07921366691589356, 0.08790106773376465, 0.11876349449157715, 0.22317934036254883, 0.055101203918457034, 0.07038393020629882, 0.08826179504394531, 0.07464718818664551, 0.062435579299926755, 0.04644508361816406], [0.1271028995513916, 0.15404119491577148, 0.19346141815185547, 0.41169061660766604, 0.11838746070861816, 0.1119300365447998, 0.15055274963378906, 0.09649128913879394, 0.06481528282165527, 0.06609740257263183], [0.6204267978668213, 0.3150507926940918, 1.2779112339019776, 0.8091363906860352, 1.1844929218292237, 0.5492772102355957, 0.31214041709899903, 0.2496030330657959, 0.1839308738708496, 0.19207940101623536], [0.30071029663085935, 0.24515247344970703, 0.41615805625915525, 0.38406524658203123, 0.6076869487762451, 0.2830947399139404, 0.23246331214904786, 0.17794342041015626, 0.13407316207885742, 0.13463029861450196], [0.0, 0.0, 1.6600484371185302, 1.005908203125, 2.3609227657318117, 0.0, 0.0, 0.0, 0.0, 0.3168801784515381]], [[0.12516236305236816, 0.1119074821472168, 0.1329413890838623, 0.21662721633911133, 0.12045679092407227, 0.1367067813873291, 0.10664715766906738, 0.07276773452758789, 0.025853967666625975, 0.026942968368530273], [0.08466362953186035, 0.09393935203552246, 0.1161423683166504, 0.23693137168884276, 0.05483684539794922, 0.07610259056091309, 0.09410033226013184, 0.08590641021728515, 0.06013617515563965, 0.04896249771118164], [0.13662939071655272, 0.1594837188720703, 0.2081141948699951, 0.438153600692749, 0.12182507514953614, 0.11785445213317872, 0.1611335277557373, 0.08885045051574707, 0.06277251243591309, 0.06316623687744141], [0.6553017616271972, 0.3153800964355469, 1.3615801334381104, 0.8425605773925782, 1.2641378879547118, 0.5776671409606934, 0.3175188064575195, 0.24460182189941407, 0.17324423789978027, 0.18149704933166505], [0.33472275733947754, 0.25500001907348635, 0.45125536918640136, 0.4174038410186768, 0.6601133823394776, 0.3079380035400391, 0.2558558940887451, 0.19164085388183594, 0.1483253002166748, 0.1501758575439453], [0.0, 0.0, 1.7659391403198241, 1.0632771968841552, 2.5404663562774656, 0.0, 0.0, 0.0, 0.0, 0.3134969711303711]], [[0.1277848243713379, 0.11572179794311524, 0.1315784454345703, 0.23465042114257811, 0.1096994400024414, 0.1369579792022705, 0.09287700653076172, 0.07032499313354493, 0.01801910400390625, 0.01842961311340332], [0.09244003295898437, 0.10799059867858887, 0.12864947319030762, 0.2675428867340088, 0.05811891555786133, 0.08086762428283692, 0.10622811317443848, 0.09163484573364258, 0.05706024169921875, 0.06570982933044434], [0.1481299877166748, 0.17162632942199707, 0.22750768661499024, 0.47036070823669435, 0.1304145336151123, 0.13223137855529785, 0.1715546131134033, 0.08603177070617676, 0.0631169319152832, 0.06562252044677734], [0.6917006492614746, 0.31804566383361815, 1.461954116821289, 0.8796361923217774, 1.3380016803741455, 0.595452880859375, 0.31386327743530273, 0.23749189376831054, 0.16598129272460938, 0.17072038650512694], [0.3608716011047363, 0.27782578468322755, 0.4930549144744873, 0.4580122470855713, 0.7201640605926514, 0.32818450927734377, 0.27539801597595215, 0.20909957885742186, 0.1579972267150879, 0.15964159965515137], [0.0, 0.0, 1.90601544380188, 1.1221512317657472, 2.730566453933716, 0.0, 0.0, 0.0, 0.0, 0.30941171646118165]]]




newres = [([median(l)] for l in sublist) for sublist in res2]

#print(_plot_results_increasing_alternatives(range(0,301,30),res,querylist=[4],modellist=[1,1,1,1,1],increasing_alternatives=False))

print(_plot_results_increasing_alternatives(range(0,10001,1000),res1,querylist=[1,2,3,4,5,6],modellist=[1,2,3,4,5,6,7,8,9,10],increasing_alternatives=False))


# X = range(len(res[0][0]))[:10]

# results = res[0]

# plt.plot(X, results[0][:10], color='r', label='1')
# plt.plot(X, results[1][:10], color='b', label='2')
# plt.plot(X, results[2][:10], color='g', label='3')
# plt.plot(X, results[3][:10], color='y', label='4')
# plt.plot(X, results[4][:10], color='m', label='5')
# plt.plot(X, results[5][:10], color='c', label='6')
# plt.plot(X, results[6][:10], color='k', label='7')
# plt.plot(X, results[7][:10], color='y', label='8')

# plt.xlabel("#Uncertainties per column")
# plt.ylabel("Time")
# plt.title(f"Query {4} with increasing numb uncertainties")

# plt.legend()
# plt.show()

# print([l[:10] for l in results])
